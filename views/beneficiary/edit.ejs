<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">

    <!--link rel='stylesheet' href='\css\bootstrap.min.css'/-->
     <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel='stylesheet' href='\css\style.css' />

   
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  </head>

  <body>

   <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Project Management</a>
          <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>  
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right ">
            <li class="active"><a href="#">Home</a></li>

            <li><a href="#">FAQ</a></li>
            <li><a href="#">About</a></li>
            <li><a href="/signout">Log out</a></li>
          </ul>
        </div>
      </div>
    </div>    

      
      <!-- Jumbotron -->

      <div class="jumbotron">
        <div class="container">
        <p>Edit Beneficiary Details</p>
        <p class="lead"></p>

        <!--<p><a class="btn btn-lg btn-success" href="#" role="button">Features Preview</a></p>-->
        </div>
      </div> 


      <div class="container">
        
        <p>User can edit or remove the beneficiary details</p> 

        <table class="table table-hover" id="benf">
          <thead>
            <tr>  
              <th>projectName</th>
              <th>group</th>
              <th>location</th>
              <th>category</th>
              <th>name</th>
              <th>funds</th>
              <th>group</th>
              <th>numPeopleBenefited</th>
              <th>transDate</th>
              <th>transOwner</th>
              <th>gender</th>
              <th>age</th>
            </tr>
          </thead>
          <tbody>
           <!--Beneficiary details value will be populated dynamically from 
           the beneficiary details collection-->
           <!--  <tr>
                <td>John</td>
                <td>Doe</td>
            </tr> -->
          </tbody>
        </table>

      </div>

  </body>
  <div class="modal fade" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Edit Beneficiary Details</h4>
      </div>
      <div class="modal-body">
        <p><input type="text" class="input-sm" id="txtfname"/></p>
        <p><input type="text" class="input-sm" id="txtlname"/></p>
        <p><input type="text" class="input-sm" id="txtemail"/></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save</button>
      </div>
    </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

   <script src="\js\jquery.js"></script>
  <script src="\js\bootstrap.min.js"></script>
 <!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script>
  
  </script>



  <script type="text/javascript">

    $(document).ready(function(){

        //For populating beneficiary details 

              $.ajax({
                url:"../beneficiary/data",
                type:"GET",
                headers:{"Accept":"application/json;odata=verbose"},
                
                success:function(data){
                  //alert(JSON.stringify(data)); 

                   for(var i=0;i<data.length;i++){
                      var tr;
                    tr = $('<tr/>');
                    //tr.append("<td><img src=" + json.Poster + " width='200' height='297'></td>");
                    tr.append("<td>" + data[i].projectName + "</td>");
                    tr.append("<td>" + data[i].group + "</td>");
                    tr.append("<td>" + data[i].location + "</td>");
                    tr.append("<td>" + data[i].category + "</td>");
                    tr.append("<td>" + data[i].name + "</td>");
                    tr.append("<td>" + data[i].funds + "</td>");
                    tr.append("<td>" + data[i].numPeopleBenefited + "</td>");
                    tr.append("<td>" + data[i].transDate + "</td>");
                    tr.append("<td>" + data[i].transOwner + "</td>");
                    tr.append("<td>" + data[i].gender + "</td>");
                    tr.append("<td>" + data[i].age + "</td>");
                    $('#benf tbody').append(tr);


                   }
                  $('#benf tbody tr').each(function(){$(this).children('td:last').append($('<button id ="Button">'))});

                   
                },
                /*,error:function(data){
                    alert("error");
                },*/
                async:false
             });


         $('#benf tbody tr td').on('click',function(){
            $("#myModal").modal("show");
           // $("#txtfname").val($(this).closest('tr').children()[0].textContent);
            //$("#txtlname").val($(this).closest('tr').children()[1].textContent);
            //$("#txtemail").val($(this).closest('tr').children()[2].textContent);
            });
        
           
    });</script>

</html>
